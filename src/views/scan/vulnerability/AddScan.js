import React, { useState } from 'react';
import { Row, Col, Tabs, Tab, Nav } from 'react-bootstrap';
import ModuleNotification from '../../../components/Widgets/Statistic/Notification';
import { useEffect } from 'react';
import axiosClient from '../../../axiosClient';
import './vul.css';
import { Link, useLocation } from 'react-router-dom';

import { ButtonToolbar, Button, OverlayTrigger, Tooltip, Dropdown, DropdownButton, Card } from 'react-bootstrap';

const AddScan = () => {
  const [listTargets, setlistTargets] = useState([]);
  const [id, setId] = useState();
  const [task, setTask] = useState('Chạy');
  const [name, setName] = useState();
  const [description, setDescription] =  useState();
  const [target, setTarget] =  useState();
  console.log(name)
  useEffect(() => {
    async function getItem() {
      const res = await axiosClient.get('targets');
      console.log(res);
      setlistTargets((listTargets) => [...res.data.items]);
    }
    getItem();
  }, []);
  const buttonOptions = [{ variant: 'secondary', icon: 'feather icon-camera mx-1' }];
  const handleButtonClick = (eventKey) => {
    if (eventKey === '1') {
      // Nếu người dùng chọn "Chạy", cập nhật giá trị của "title" và "task" là "Chạy"
      setTask('Chạy');
    } else if (eventKey === '2') {
      // Nếu người dùng chọn "Lưu", cập nhật giá trị của "title" là "Lưu" và "task" là "Lưu"
      setTask('Lưu');
    }
  };
  const basicDropdownButton = buttonOptions.map((button) => {
    return (
      <DropdownButton
        title={task}
        // variant={button.variant}
        id={`dropdown-variants-${button.variant}`}
        key={button.variant}
      >
        <Dropdown.Item eventKey="1" onClick={() => handleButtonClick('1')}>
          Chạy
        </Dropdown.Item>
        <Dropdown.Item eventKey="2" onClick={() => handleButtonClick('2')}>
          Lưu
        </Dropdown.Item>
      </DropdownButton>
    );
  });
  const cancel = (e) => {
    // e.preventDefault();
    // console.log(url, name);
    console.log(name, description)
    setName("");
    setDescription("");
    setTarget("");
  };
  return (
    <React.Fragment>
      <Row>
        <Col>
          <Row>
            <h5 className="mt-4 my-title">Rà soát mới</h5>
            <div style={{display:"flex", alignItems:"flex-end", paddingLeft:"20px"}}>
            <ButtonToolbar className="my-button">{basicDropdownButton}</ButtonToolbar>
            <Button variant={'outline-primary'} className="my-button" onClick={(e) => cancel()}>
              Hủy bỏ
            </Button>
            </div>
          </Row>
          <hr />
          <Col md="8">
            <Tabs variant="pills" defaultActiveKey="home" className="mb-3">
              <Tab eventKey="home" title="CHỌN ĐỐI TƯỢNG">
                <div className="mb-3">
                  <label>
                    <span style={{ fontWeight: 'bold' }}>Tên rà quét</span> <span style={{ fontStyle: 'italic' }}>(Bắt buộc)</span>
                  </label>
                  <input
                    value={name}
                    onChange={e=>setName(e.target.value)}
                    className="form-control email"
                    placeholder="Dò quét server 01"
                  />
                  <label style={{ marginTop: 5 }}>
                    <span style={{ fontStyle: 'italic', fontSize: 12 }}>Giúp phân biệt các lần rà quét khác nhau của 1 mục tiêu</span>
                  </label>
                </div>
                <div className="mb-3">
                  <span style={{ fontWeight: 'bold' }}>Mô tả</span>
                  <input
                  value={description}
                  onChange={e=>setDescription(e.target.value)}
                    className="form-control"
                    placeholder="Lần rà quét này để kiểm tra server tháng 02/2023"
                  />
                </div>
                <div className="mb-3">
                  <label>
                    <span style={{ fontWeight: 'bold' }}>Mục tiêu</span> <span style={{ fontStyle: 'italic' }}>(Bắt buộc)</span>
                  </label>
                  <div>
                    <Row>
                      <select
                        class="form-control name-domain "
                        style={{
                          marginLeft: 20,
                          width: '80%'
                          // height: '40px',
                        }}
                        onChange={(event) => setTarget(event.target.value)}
                      >
                        {listTargets &&
                          listTargets.map((item) => {
                            return (
                              <option value={item.id} onClick={() => setTarget(item.id)}>
                                {item.address}
                              </option>
                            );
                          })}
                      </select>
                      <Link
                        title="Thêm mới đối tượng"
                        to={'/scan/website'}
                        className="feather icon-plus-circle text-primary f-15 m-r-5"
                        style={{ fontSize: '30px', marginLeft: 10, marginTop: 5 }}
                      ></Link>
                    </Row>
                  </div>
                  <label style={{ marginTop: 5 }}>
                    <span style={{ fontStyle: 'italic', fontSize: 12 }}>Địa chỉ URL hoặc IP của mục tiêu</span>
                  </label>
                </div>
                <div>
                  <Link
                    title="Danh sách rà soát"
                    to={'/scan/vulnerability/result'}
                    className="feather icon-chevron-left text-primary f-15 m-r-5"
                    style={{ fontSize: '30px' }}
                  ></Link>
                </div>
              </Tab>
              <Tab eventKey="profile" title="CHỌN ENGINE">
                <p>
                  Food truck fixie locavore, accusamus mcsweeney's marfa nulla single-origin coffee squid. Exercitation +1 labore velit,
                  blog sartorial PBR leggings next level wes anderson artisan four loko farm-to-table craft beer twee. Qui photo booth
                  letterpress, commodo enim craft beer mlkshk aliquip jean shorts ullamco ad vinyl cillum PBR. Homo nostrud organic,
                  assumenda labore aesthetic magna delectus mollit. Keytar helvetica VHS salvia yr, vero magna velit sapiente labore
                  stumptown. Vegan fanny pack odio cillum wes anderson 8-bit, sustainable jean shorts beard ut DIY ethical culpa terry
                  richardson biodiesel. Art party scenester stumptown, tumblr butcher vero sint qui sapiente accusamus tattooed echo park.
                </p>
              </Tab>
            </Tabs>
          </Col>
        </Col>
      </Row>
    </React.Fragment>
  );
};

export default AddScan;
